<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Roll Number Organizer</title>
<style>
  * {
    box-sizing: border-box;
    font-family: "Segoe UI", Arial, sans-serif;
  }
  body {
    margin: 0;
    padding: 20px;
    background: linear-gradient(135deg, #89f7fe, #66a6ff); /* Blue Lagoon */
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: flex-start;
  }
  .container {
    background: #fff;
    padding: 25px 30px;
    border-radius: 20px;
    box-shadow: 0 12px 25px rgba(0,0,0,0.2);
    max-width: 700px;
    width: 100%;
    text-align: center;
    transition: transform 0.3s;
  }
  h1 {
    margin-top: 0;
    font-size: 26px;
    color: #2193b0;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 15px;
  }
  th, td {
    border: 1px solid #ddd;
    padding: 10px;
    text-align: center;
    border-radius: 5px;
  }
  th {
    background: #2193b0;
    color: white;
    font-size: 16px;
  }
  tr:nth-child(even) {
    background: #f9f9f9;
  }
  /* Removed hover background color to keep it simple */
  input[type="text"] {
    width: 95%;
    padding: 8px;
    border: 1px solid #ccc;
    border-radius: 8px;
    text-align: center;
    transition: all 0.2s;
  }
  input[type="text"]:focus {
    outline: none;
    border-color: #2193b0;
    box-shadow: 0 0 8px rgba(33,147,176,0.4);
  }
  button {
    padding: 12px 22px;
    margin: 10px 5px;
    border: none;
    border-radius: 10px;
    font-size: 15px;
    cursor: pointer;
    transition: all 0.3s;
  }
  button:hover {
    transform: translateY(-2px);
    opacity: 0.9;
  }
  .generate {
    background: #2193b0;
    color: #fff;
  }
  .reset {
    background: #f44336;
    color: #fff;
  }
  .load-more {
    background: #4CAF50;
    color: #fff;
  }
  /* Loading overlay */
  .loading-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.55);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 999;
    display: none;
    opacity: 0;
    transition: opacity 0.3s;
  }
  .loading-overlay.show {
    display: flex;
    opacity: 1;
  }
  .loading-box {
    background: #fff;
    padding: 25px 35px;
    border-radius: 15px;
    text-align: center;
    box-shadow: 0 8px 20px rgba(0,0,0,0.3);
    animation: pop 0.4s ease;
  }
  @keyframes pop {
    0% { transform: scale(0.8); opacity: 0; }
    100% { transform: scale(1); opacity: 1; }
  }
  .spinner {
    border: 4px solid #f3f3f3;
    border-top: 4px solid #2193b0;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    animation: spin 1s linear infinite;
    margin: 0 auto 15px auto;
  }
  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
  #output table {
    margin-top: 15px;
    width: 100%;
    border-collapse: collapse;
  }
  #output th, #output td {
    padding: 8px;
    border: 1px solid #ddd;
    border-radius: 5px;
  }
  #output th {
    background: #2193b0;
    color: #fff;
  }
  #output tr:nth-child(even) {
    background: #f1f1f1;
  }
</style>
</head>
<body>
<div class="container">
  <h1>Roll Number Organizer</h1>
  <p>Enter up to 100 student names (10 at a time):</p>
  
  <table id="nameTable">
    <tr>
      <th>Row</th>
      <th>Student Name</th>
    </tr>
  </table>

  <button class="load-more" id="loadBtn" onclick="loadMoreRows()">Load 10 More</button>
  <br>
  <button class="generate" onclick="generateRollList()">Generate Roll Numbers</button>
  <button class="reset" onclick="resetForm()">Reset</button>

  <div id="output"></div>
</div>

<!-- Loading dialog -->
<div class="loading-overlay" id="loadingOverlay">
  <div class="loading-box">
    <div class="spinner"></div>
    <p>Generating Roll List...</p>
  </div>
</div>

<script>
let currentRows = 0;
const maxRows = 100;
const increment = 10;
const table = document.getElementById("nameTable");
const loadBtn = document.getElementById("loadBtn");
const loadingOverlay = document.getElementById("loadingOverlay");
const outputDiv = document.getElementById("output");

loadMoreRows();

function loadMoreRows() {
  let nextLimit = Math.min(currentRows + increment, maxRows);
  for (let i = currentRows + 1; i <= nextLimit; i++) {
    let row = table.insertRow();
    let cell1 = row.insertCell(0);
    let cell2 = row.insertCell(1);
    cell1.textContent = i;
    let input = document.createElement("input");
    input.type = "text";
    input.placeholder = "Enter name...";
    input.dataset.index = i; 
    input.addEventListener("keydown", handleKeyNav);
    cell2.appendChild(input);
  }
  currentRows = nextLimit;

  if (currentRows >= maxRows) loadBtn.style.display = "none";

  const firstEmpty = Array.from(document.querySelectorAll("#nameTable input")).find(inp => inp.value === "");
  if (firstEmpty) firstEmpty.focus();
}

function handleKeyNav(e) {
  let index = parseInt(this.dataset.index);
  let inputs = document.querySelectorAll("#nameTable input");

  if (e.key === "Enter" || e.key === "ArrowDown") {
    e.preventDefault();
    if (index < currentRows) {
      inputs[index].focus();
    } else if (currentRows < maxRows) {
      loadMoreRows();
      setTimeout(() => {
        document.querySelector(`#nameTable input[data-index="${index + 1}"]`).focus();
      }, 50);
    }
  }

  if (e.key === "ArrowUp") {
    e.preventDefault();
    if (index > 1) inputs[index - 2].focus();
  }
}

function generateRollList() {
  let inputs = document.querySelectorAll("#nameTable input");
  let names = [];
  inputs.forEach(input => {
    if (input.value.trim() !== "") names.push(input.value.trim());
  });

  if (names.length === 0) {
    alert("Please enter at least one student name!");
    return;
  }

  loadingOverlay.classList.add("show");

  let delay = Math.floor(Math.random() * 2 + 2) * 1000;

  setTimeout(() => {
    loadingOverlay.classList.remove("show");

    names.sort((a, b) => a.localeCompare(b));

    let output = "<h2>Sorted Roll List</h2><table><tr><th>Roll No.</th><th>Name</th></tr>";
    names.forEach((name, i) => {
      output += `<tr><td>${i + 1}</td><td>${name}</td></tr>`;
    });
    output += "</table>";

    outputDiv.innerHTML = output;
    outputDiv.scrollIntoView({ behavior: 'smooth', block: 'start' });
  }, delay);
}

function resetForm() {
  table.innerHTML = "<tr><th>Row</th><th>Student Name</th></tr>";
  currentRows = 0;
  loadBtn.style.display = "inline-block";
  loadMoreRows();
  outputDiv.innerHTML = "";
}
</script>
</body>
</html>
